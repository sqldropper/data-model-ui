create table sd_common.audit_log (audit_id bigint generated by default as identity, audit_timestamp timestamp(6), created_at timestamp(6), updated_at timestamp(6), changes varchar(2000), message varchar(2000), table_keys varchar(2000), action varchar(255), created_by varchar(255), table_name varchar(255), updated_by varchar(255), primary key (audit_id));
create index idx_audit_log_tablename_action on sd_common.audit_log (table_name, action);
create index idx_audit_log_tablename_table_keys on sd_common.audit_log (table_name, table_keys);
create table sd_usr_mngmnt.privileges (enabled boolean default true not null, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, privilege_name varchar(255) not null, updated_by varchar(255), primary key (privilege_id));
create table sd_usr_mngmnt.privileges_hist (enabled boolean default true, rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, privilege_name varchar(255), updated_by varchar(255), primary key (rev, privilege_id));
create table sd_usr_mngmnt.roles (enabled boolean default true not null, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, role_name varchar(255) not null, updated_by varchar(255), primary key (role_id));
create table sd_usr_mngmnt.roles_hist (enabled boolean default true, rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, role_name varchar(255), updated_by varchar(255), primary key (rev, role_id));
create table sd_usr_mngmnt.roles_privileges (created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, role_id varchar(255) not null, updated_by varchar(255), primary key (role_id, privilege_id));
create table sd_usr_mngmnt.roles_privileges_hist (rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, role_id varchar(255) not null, updated_by varchar(255), primary key (rev, privilege_id, role_id));
create table sd_usr_mngmnt.user_roles (created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, updated_by varchar(255), user_id varchar(255) not null, primary key (user_id, role_id));
create table sd_usr_mngmnt.user_roles_hist (rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, updated_by varchar(255), user_id varchar(255) not null, primary key (rev, role_id, user_id));
create table sd_usr_mngmnt.users (account_expired boolean default false not null, account_locked boolean default false not null, credentials_expired boolean default false not null, user_enabled boolean default true not null, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), email varchar(255) not null unique, first_name varchar(255) not null, last_name varchar(255) not null, password varchar(255) not null, updated_by varchar(255), user_id varchar(255) not null, primary key (user_id));
create table sd_usr_mngmnt.users_hist (account_expired boolean default false, account_locked boolean default false, credentials_expired boolean default false, rev integer not null, revtype smallint, user_enabled boolean default true, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), email varchar(255), first_name varchar(255), last_name varchar(255), password varchar(255), updated_by varchar(255), user_id varchar(255) not null, primary key (rev, user_id));
create index idx_privileges_id on sd_usr_mngmnt.privileges (privilege_id);
create index idx_roles_id on sd_usr_mngmnt.roles (role_id);
create index idx_roles_privileges on sd_usr_mngmnt.roles_privileges (role_id, privilege_id);
create index idx_user_roles on sd_usr_mngmnt.user_roles (user_id, role_id);
create index idx_users_id on sd_usr_mngmnt.users (user_id);
create sequence revinfo_seq start with 1 increment by 50;
create table revinfo (rev integer not null, revtstmp bigint, primary key (rev));
alter table if exists sd_usr_mngmnt.privileges_hist add constraint FKohjx1kbihptg4ipo32oui7cg9 foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.roles_hist add constraint FKpgxcl5j69j31cns4sxtwtnrsi foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.roles_privileges add constraint FK5duhoc7rwt8h06avv41o41cfy foreign key (privilege_id) references sd_usr_mngmnt.privileges;
alter table if exists sd_usr_mngmnt.roles_privileges add constraint FK629oqwrudgp5u7tewl07ayugj foreign key (role_id) references sd_usr_mngmnt.roles;
alter table if exists sd_usr_mngmnt.roles_privileges_hist add constraint FK4qofj682unmtrlyiflbybr9qk foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references sd_usr_mngmnt.roles;
alter table if exists sd_usr_mngmnt.user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references sd_usr_mngmnt.users;
alter table if exists sd_usr_mngmnt.user_roles_hist add constraint FKphf1ltn2u5c9cnuvxgremt4fn foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.users_hist add constraint FKjytmnxymhnh8wdmc1gsmjmj38 foreign key (rev) references revinfo;
create table sd_common.audit_log (audit_id bigint generated by default as identity, audit_timestamp timestamp(6), created_at timestamp(6), updated_at timestamp(6), changes varchar(2000), message varchar(2000), table_keys varchar(2000), action varchar(255), created_by varchar(255), table_name varchar(255), updated_by varchar(255), primary key (audit_id));
create index idx_audit_log_tablename_action on sd_common.audit_log (table_name, action);
create index idx_audit_log_tablename_table_keys on sd_common.audit_log (table_name, table_keys);
create table sd_usr_mngmnt.privileges (enabled boolean default true not null, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, privilege_name varchar(255) not null, updated_by varchar(255), primary key (privilege_id));
create table sd_usr_mngmnt.privileges_hist (enabled boolean default true, rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, privilege_name varchar(255), updated_by varchar(255), primary key (rev, privilege_id));
create table sd_usr_mngmnt.roles (enabled boolean default true not null, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, role_name varchar(255) not null, updated_by varchar(255), primary key (role_id));
create table sd_usr_mngmnt.roles_hist (enabled boolean default true, rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, role_name varchar(255), updated_by varchar(255), primary key (rev, role_id));
create table sd_usr_mngmnt.roles_privileges (created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, role_id varchar(255) not null, updated_by varchar(255), primary key (role_id, privilege_id));
create table sd_usr_mngmnt.roles_privileges_hist (rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), privilege_id varchar(255) not null, role_id varchar(255) not null, updated_by varchar(255), primary key (rev, privilege_id, role_id));
create table sd_usr_mngmnt.user_roles (created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, updated_by varchar(255), user_id varchar(255) not null, primary key (user_id, role_id));
create table sd_usr_mngmnt.user_roles_hist (rev integer not null, revtype smallint, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), role_id varchar(255) not null, updated_by varchar(255), user_id varchar(255) not null, primary key (rev, role_id, user_id));
create table sd_usr_mngmnt.users (account_expired boolean default false not null, account_locked boolean default false not null, credentials_expired boolean default false not null, user_enabled boolean default true not null, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), email varchar(255) not null unique, first_name varchar(255) not null, last_name varchar(255) not null, password varchar(255) not null, updated_by varchar(255), user_id varchar(255) not null, primary key (user_id));
create table sd_usr_mngmnt.users_hist (account_expired boolean default false, account_locked boolean default false, credentials_expired boolean default false, rev integer not null, revtype smallint, user_enabled boolean default true, created_at timestamp(6), updated_at timestamp(6), created_by varchar(255), email varchar(255), first_name varchar(255), last_name varchar(255), password varchar(255), updated_by varchar(255), user_id varchar(255) not null, primary key (rev, user_id));
create index idx_privileges_id on sd_usr_mngmnt.privileges (privilege_id);
create index idx_roles_id on sd_usr_mngmnt.roles (role_id);
create index idx_roles_privileges on sd_usr_mngmnt.roles_privileges (role_id, privilege_id);
create index idx_user_roles on sd_usr_mngmnt.user_roles (user_id, role_id);
create index idx_users_id on sd_usr_mngmnt.users (user_id);
create sequence revinfo_seq start with 1 increment by 50;
create table revinfo (rev integer not null, revtstmp bigint, primary key (rev));
alter table if exists sd_usr_mngmnt.privileges_hist add constraint FKohjx1kbihptg4ipo32oui7cg9 foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.roles_hist add constraint FKpgxcl5j69j31cns4sxtwtnrsi foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.roles_privileges add constraint FK5duhoc7rwt8h06avv41o41cfy foreign key (privilege_id) references sd_usr_mngmnt.privileges;
alter table if exists sd_usr_mngmnt.roles_privileges add constraint FK629oqwrudgp5u7tewl07ayugj foreign key (role_id) references sd_usr_mngmnt.roles;
alter table if exists sd_usr_mngmnt.roles_privileges_hist add constraint FK4qofj682unmtrlyiflbybr9qk foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references sd_usr_mngmnt.roles;
alter table if exists sd_usr_mngmnt.user_roles add constraint FKhfh9dx7w3ubf1co1vdev94g3f foreign key (user_id) references sd_usr_mngmnt.users;
alter table if exists sd_usr_mngmnt.user_roles_hist add constraint FKphf1ltn2u5c9cnuvxgremt4fn foreign key (rev) references revinfo;
alter table if exists sd_usr_mngmnt.users_hist add constraint FKjytmnxymhnh8wdmc1gsmjmj38 foreign key (rev) references revinfo;
